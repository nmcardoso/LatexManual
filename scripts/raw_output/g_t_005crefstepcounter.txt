       The \refstepcounter command works in the same way as \stepcounter (see \stepcounter): it globally increments the value of counter by one and resets the value of any counter numbered within it.  (For the definition of counters numbered within, see \newcounter.)  In addition, this command also defines the current \ref value to be the result of \thecounter.  While the counter value is set globally, the \ref value is set locally, i.e., inside the current group.   